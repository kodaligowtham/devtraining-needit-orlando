<?xml version="1.0" encoding="UTF-8"?><record_update table="sysauto_script">
    <sysauto_script action="INSERT_OR_UPDATE">
        <active>true</active>
        <business_calendar/>
        <condition/>
        <conditional>false</conditional>
        <entered_time>1970-01-01 08:05:00</entered_time>
        <name>Find NeedIt Tasks Due Soon</name>
        <run_as display_value="System Administrator">6816f79cc0a8016401c5a33be04be441</run_as>
        <run_as_tz/>
        <run_dayofmonth>1</run_dayofmonth>
        <run_dayofweek>1</run_dayofweek>
        <run_period/>
        <run_start>2020-04-14 16:20:42</run_start>
        <run_time>1970-01-01 08:05:00</run_time>
        <run_type>daily</run_type>
        <script><![CDATA[//Get today's Time and Date

var rightNow = new GlideDateTime();
//var nextDay = rightNow.addDaysLocalTime(1);
//Query the Db for the needit tasks with due date field values older the the current time .Only return the Neeit task records that do not have the state field value Closed Complete

var gr = new GlideRecord('x_58872_needit_needit_task');
gr.addQuery('due_date','>=',rightNow);
gr.addQuery('due_date','<',gs.hoursAgo(-24));
gr.addQuery('state','!=',3);
gr.query();

//Write Log message for each overdue Needit task record

while(gr.next()){
	gs.info("NeedIt task Due soon record  = " + gr.number);
	gs.eventQueue('x_58872_needit.dueSoonNeedItTasks',gr,gr.number,gs.getUserName());
}]]></script>
        <sys_class_name>sysauto_script</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2020-04-14 16:28:10</sys_created_on>
        <sys_id>04a766af0788d09001d4f03c7c1ed07f</sys_id>
        <sys_mod_count>12</sys_mod_count>
        <sys_name>Find NeedIt Tasks Due Soon</sys_name>
        <sys_package display_value="NeedIt" source="x_58872_needit">6ead8e780f603200cd674f8ce1050ed1</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt">6ead8e780f603200cd674f8ce1050ed1</sys_scope>
        <sys_update_name>sysauto_script_04a766af0788d09001d4f03c7c1ed07f</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2020-04-15 10:15:16</sys_updated_on>
        <time_zone>floating</time_zone>
        <upgrade_safe>false</upgrade_safe>
    </sysauto_script>
</record_update>
